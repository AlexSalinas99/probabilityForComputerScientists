
% rebase('templates/chapter.html', title="Name to Age")
 
<center><h1>Name to Age</h1></center>
<hr/>

<p>
Because of shifting patterns in name popularity, a person's age is a hint as to their age. The United States publishes a census which contains counts of how many US residents were born with a given name in a given year. We can use inference to compute the reverse probability distribution: an updated belief in a person's age, given their name. As a reminder, if I know the year someone was born, I can calculate their age.

<center><img class="mainFigureLg" src="{{pathToRoot}}img/chapters/name2age.png"></img></center>

<p> The US census data provides you with a function: <code>count(year, name)</code> which returns the number of US citizens, born in a given year with a given name. You also have access to a list <code>names</code> which has each name ever given in the US and <code>years</code> which has all the years. This function is implicitly giving us the joint probability over names and birth year. The probability of a joint assignment to name and birth year can be estimated as the count of people with that name, born on that year, over the total number of people in the dataset. Let $B$ be the year someone is born, and let $N$ be their name:
	$$
	P(B = b,N = n) \approx 
	\frac{\text{count}(b, n)}
	{\sum\limits_{i \in \text{names}} \sum\limits_{j \in \text{years}} \text{count}(i,j)}
	$$

<p>The question we would really like to answer is: what  is  your belief  that  a  resident  was  born  in  1950,  given  that  their name is Gary? We can get started by applying the definition of conditional probability for random variables:

		\begin{align*}
		\P( B = 1950 | N = \text{Gary} ) = \frac{\P(N = \text{Gary} , B = 1950)}{\P(N = \text{Gary})}
		\end{align*}
But this leaves one term to compute: $\P(N = \text{Gary})$ which we can compute using marginalization:

\begin{align*}
\P( N = \text{Gary}) &= \sum_{y \in \text{years}} P(B = y,N = \text{Gary})\\
&\approx \frac{  \sum\limits_{y \in \text{years}} \text{count}(y, \text{Gary})}{\sum\limits_{i \in \text{names}} \sum\limits_{j \in \text{years}} \text{count}(i,j)}
\end{align*}



<p>Putting this all together we have:

\begin{align*}
\P( B = 1950 | N = \text{Gary} ) 
&= \frac{\P(N = \text{Gary} , B = 1950)}{\P(N = \text{Gary})} \\
&\approx 
\frac
{
	\Big(
	\frac{\text{count}(1950, \text{Gary})}
	{\sum\limits_{i \in \text{names}} \sum\limits_{j \in \text{years}} \text{count}(i,j)}
	\Big)
}
{
	\Big(
	\frac{  \sum\limits_{y \in \text{years}} \text{count}(y, \text{Gary})}{\sum\limits_{i \in \text{names}} \sum\limits_{j \in \text{years}} \text{count}(i,j)}
	\Big)
} \\
&\approx
\frac
{
	\text{count}(1950, \text{Gary})
}
{
	\sum\limits_{y \in \text{years}} \text{count}(y, \text{Gary})
}
\end{align*}


<p>More generally, for any name, we can compute the conditional probability mass function over birth year $B$:

	\begin{align*}
\P( B = b | N = n ) 
&\approx 
\frac
{
	\text{count}(b, n)
}
{
	\sum\limits_{y \in \text{years}} \text{count}(y, n)
}
\end{align*}

<h3>Assumptions</h3>

This problem makes many assumptions which are worth highlighting. In fact, any time we make generalizations (especially about demographics) based on sparse information we should tread lightly. Here are the assumptions that I can think of:

<ol>
	<li>We assume that people don't change their first names. Obviously this is wrong. It is especially wrong for the trans community, thus introducing a systematic error.</li>
	<li>This algorithm doesn't take into account the distribution over who could plaussibly be alive at the time the name was recorded. For example, lets say the name was recorded from a user in 2021. That user likely wasn't born in 1800.</li>
	<li>The US census is not perfect. It does not capture all people, and there are demographics which are underrepresented. This will also skew our results</li>
</ol>

