
<!DOCTYPE html>
<html>

<head>
    

<title>Bridge Distribution</title>

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta http-equiv="content-type" content="text/html; charset=UTF8">

<!-- Python highlighting -->
<script src="../../../plugins/prism/prism.js"></script>
<link href="../../../plugins/prism/prism.css" rel="stylesheet" />

<!-- jQuery CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" integrity="sha512-uto9mlQzrs59VwILcLiRYeLKPPbS/bT71da/OEBYEwcdNUk8jYIy+D176RYoop1Da+f9mvkYrmj5MCLZWEtQuA==" crossorigin="anonymous"></script>
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/base/jquery-ui.css" rel="Stylesheet" type="text/css" />

<!-- D3 CDN -->
<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

<!-- Chart CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"></script>

<!-- Lunr CDN -->
 <script src="https://unpkg.com/lunr/lunr.js"></script>

<!-- Firebase CDN -->
<script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="../../../css/style.css">
   

<!-- Java Script -->
<script src="../../../plugins/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<!-- Python highlighting -->
<script src="../../../plugins/prism/prism.js"></script>
<link href="../../../plugins/prism/prism.css" rel="stylesheet" />

<!-- Probability Packages -->
<script src="../../../js/probabilityUtils.js"></script>
<script src="../../../plugins/probability/gaussian.js"></script>
<script src="../../../plugins/color.js"></script>
<script src='https://cdn.jsdelivr.net/npm/jstat@latest/dist/jstat.min.js'></script>


<!-- font awesome -->
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

<!-- SWAL -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>


<!-- Stanford -->
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Source+Serif+Pro:400,600,700' rel='stylesheet' type='text/css'>
<link href="https://fonts.googleapis.com/css?family=Crimson+Text" rel="stylesheet">

<!-- Math Jax -->
<!-- <script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script> -->
<script type="text/javascript">
  MathJax = {
    config: ["MMLorHTML.js"],
    jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML"],
    extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js"],
    TeX: {
      extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js", "action.js"]
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    },
	"fast-preview": {
	  disabled: true
	}
  };
</script>
<script type="text/javascript" id="MathJax-script" async
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
</script>



<script src="../../../plugins/math.min.js"></script>



    <!-- Popper.JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <!-- Bootstrap JS -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>

 <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/malihu-custom-scrollbar-plugin/3.1.5/jquery.mCustomScrollbar.min.css">
    <script src="../../../plugins/jquery.mCustomScrollbar.js"></script>

</head>

<script>
  Chart.defaults.global.defaultFontFamily = 'Times New Roman';
  Chart.defaults.global.defaultFontSize = 18;
</script>


<!-- I declare a few math operators I often use in equations -->
<div style="display:none">
  $\DeclareMathOperator{\p}{Pr}$
  $\DeclareMathOperator{\P}{Pr}$
  $\DeclareMathOperator{\c}{^C}$
  $\DeclareMathOperator{\or}{  or}$
  $\DeclareMathOperator{\and}{  and}$
  $\DeclareMathOperator{\var}{Var}$
  $\DeclareMathOperator{\E}{E}$
  $\DeclareMathOperator{\std}{Std}$
  $\DeclareMathOperator{\Ber}{Bern}$
  $\DeclareMathOperator{\Bin}{Bin}$
  $\DeclareMathOperator{\Poi}{Poi}$
  $\DeclareMathOperator{\Exp}{Exp}$
  $\DeclareMathOperator{\N}{N}$
</div>

<body class="greyBackground">


    <div class="wrapper">
        <!-- Sidebar  -->
<nav id="sidebar">
    <div class="sidebar-header">
        <!-- <div></div> -->
        <a style="text-align:center" href="../../"><h3><i class="fas fa-book-open"></i><br/> Probability for a <br/>Digital World<br/></h3></a>
    </div>

    <div> 
        <div class="searchCol" style="font-family: 'Source Sans Pro', sans-serif;">
            <!-- This adds a search bar! -->
            <input type="text" class="form-control bookSearch" id="probability-for-digital-world-search" aria-describedby="search box" placeholder="🔍 Search book..."/>
        </div>
        <!-- The magnifying glass icon -->
        
    </div>

<!-- intro -->
<ul class="list-unstyled components">
<li>
<a id=sidebar-intro href="../../intro/intro">Introduction</a>
<a id=sidebar-notation href="../../intro/notation">Notation</a>
<a id=sidebar-prob_code href="../../intro/prob_code">Probability in Code</a>
</li>
</ul>

<!-- part1 -->
<ul class="list-unstyled components">
<li><p href="{pathToLang}part1">Part 1: Core Probability</p></li>
<li>
<a id=sidebar-counting href="../../part1/counting">Counting</a>
<a id=sidebar-combinatorics href="../../part1/combinatorics">Combinatorics</a>
<a id=sidebar-probability href="../../part1/probability">Definition of Probability</a>
<a id=sidebar-equally_likely href="../../part1/equally_likely">Equally Likely Outcomes</a>
<a id=sidebar-prob_or href="../../part1/prob_or">Probability of <b>or</b></a>
<a id=sidebar-cond_prob href="../../part1/cond_prob">Conditional Probability</a>
<a id=sidebar-independence href="../../part1/independence">Independence</a>
<a id=sidebar-prob_and href="../../part1/prob_and">Probability of <b>and</b></a>
<a id=sidebar-law_total href="../../part1/law_total">Law of Total Probability</a>
<a id=sidebar-bayes_theorem href="../../part1/bayes_theorem">Bayes' Theorem</a>
<a id=sidebar-log_probabilities href="../../part1/log_probabilities">Log Probabilities</a>
</li>
</ul>

<!-- part2 -->
<ul class="list-unstyled components">
<li><p href="{pathToLang}part2">Part 2: Random Variables</p></li>
<li>
<a id=sidebar-rvs href="../../part2/rvs">Random Variables</a>
<a id=sidebar-pmf href="../../part2/pmf">Probability Mass Functions</a>
<a id=sidebar-expectation href="../../part2/expectation">Expectation</a>
<a id=sidebar-variance href="../../part2/variance">Variance</a>
<a id=sidebar-bernoulli href="../../part2/bernoulli">Bernoulli Distribution</a>
<a id=sidebar-binomial href="../../part2/binomial">Binomial Distribution</a>
<a id=sidebar-poisson href="../../part2/poisson">Poisson Distribution</a>
<a id=sidebar-continuous href="../../part2/continuous">Continuous Distribution</a>
<a id=sidebar-normal href="../../part2/normal">Normal Distribution</a>
<a id=sidebar-all_distributions href="../../part2/all_distributions">Random Variable Reference</a>
</li>
</ul>

<!-- part3 -->
<ul class="list-unstyled components">
<li><p href="{pathToLang}part3">Part 3: Probabilistic Models</p></li>
<li>
<a id=sidebar-joint href="../../part3/joint">Joint Probability</a>
<a id=sidebar-independent_vars href="../../part3/independent_vars">Independence in Variables</a>
<a id=sidebar-cond_distributions href="../../part3/cond_distributions">Conditional Distributions</a>
<a id=sidebar-variable_bayes href="../../part3/variable_bayes">Bayes Theorem Revisited</a>
<a id=sidebar-continuous_joint href="../../part3/continuous_joint">Continuous Joint</a>
<a id=sidebar-multivariate_gaussian href="../../part3/multivariate_gaussian">Multivariate Gaussian</a>
<a id=sidebar-bayesian_networks href="../../part3/bayesian_networks">Bayesian Networks</a>
<a id=sidebar-sampling_revisited href="../../part3/sampling_revisited">Sampling Revisited</a>
<a id=sidebar-computational_inference href="../../part3/computational_inference">Computational Inference</a>
</li>
</ul>

<!-- part4 -->
<ul class="list-unstyled components">
<li><p href="{pathToLang}part4">Part 4: Uncertainty Theory</p></li>
<li>
<a id=sidebar-clt href="../../part4/clt">Central Limit Theorem</a>
<a id=sidebar-bootstrapping href="../../part4/bootstrapping">Bootstrapping</a>
<a id=sidebar-parameters href="../../part4/parameters">Uncertainty in Parameters</a>
<a id=sidebar-beta href="../../part4/beta">Beta Distribution</a>
<a id=sidebar-bounds href="../../part4/bounds">Probability Bounds</a>
</li>
</ul>

<!-- part5 -->
<ul class="list-unstyled components">
<li><p href="{pathToLang}part5">Part 5: Machine Learning</p></li>
<li>
<a id=sidebar-mle href="../../part5/mle">Maximum Likelihood Estimation</a>
<a id=sidebar-map href="../../part5/map">Maximum A Posteriori</a>
<a id=sidebar-naive_bayes href="../../part5/naive_bayes">Naïve Bayes</a>
<a id=sidebar-optimization href="../../part5/optimization">Gradient Ascent Optimization</a>
<a id=sidebar-linear_regression href="../../part5/linear_regression">Linear Regression</a>
<a id=sidebar-log_regression href="../../part5/log_regression">Logistic Regression</a>
<a id=sidebar-neural_nets href="../../part5/neural_nets">Artificial Neural Networks</a>
</li>
</ul>

<!-- examples -->
<ul class="list-unstyled components">
<li><p href="{pathToLang}examples">Examples</p></li>
<li>
<a id=sidebar-enigma href="../../examples/enigma">Enigma Machine</a>
<a id=sidebar-prob_baby_delivery href="../../examples/prob_baby_delivery">Probability of Baby Delivery</a>
<a id=sidebar-bacteria_evolution href="../../examples/bacteria_evolution">Bacteria Evolution</a>
<a id=sidebar-fast_dot_com href="../../examples/fast_dot_com">Fast.com</a>
<a id=sidebar-greenhouse_effect href="../../examples/greenhouse_effect">Greenhouse Effect</a>
<a id=sidebar-bridge_distribution href="../../examples/bridge_distribution">Bridge Distribution</a>
<a id=sidebar-curse_of_dimensionality href="../../examples/curse_of_dimensionality">Curse of Dimensionality</a>
<a id=sidebar-period_tracker href="../../examples/period_tracker">Period Tracker</a>
<a id=sidebar-fairness href="../../examples/fairness">Fairness</a>
<a id=sidebar-climate_sensitivity href="../../examples/climate_sensitivity">Climate Sensitivity</a>
<a id=sidebar-age_given_names href="../../examples/age_given_names">Age Given Name</a>
<a id=sidebar-grades_not_normal href="../../examples/grades_not_normal">Grades are Not Normal</a>
</li>
</ul>



    <ul class="list-unstyled components">
        
         <li>
            <p>Part ?: Misfits</p>
        </li>
        <li>
             <a href="../../examples/probBabies.html">Probability and babies</a>
            
             <a href="../../">Sampling from a likelihood function</a>
             <a href="../../">Law of Total Expectation</a>
            
        </li>
    </ul>



    <ul class="list-unstyled CTAs">
        <li>
            Ⓒ Chris Piech, Stanford University
            <!-- <a href="https://compedu.stanford.edu/codeinplace/v1/#/course" class="download">Back to Code in Place</a> -->
        </li>
    </ul>
</nav>
        <!-- Page Content  -->
        <div id="content">

<button type="button" id="sidebarCollapse" class="mobile-only btn btn-dark">
    <i class="fas fa-align-left"></i>
    <span></span>
</button>
            <button id="curiosityButton" onclick = "onCuriosity()" type="button" class="btn btn-primary btn-sm">
              <span style="font-size:150%">I'm Curious</span>
              <!-- <i class="fas fa-question-circle" style="font-size:200%"></i> -->
              <span></span>
          </button>
            
            <div class="container-fluid">
                <div class="row d-flex justify-content-center">
                    <div class="col handout" >
              
                        
 
<center><h1>Bridge Distribution</h1></center>
<hr/>

<p>
	<div class="bordered">

		<p><b><i>Example</i>: Distribution of suit splits</b></p>

<p>
	Imagine that there are cards split between two equal sized hands. Across the two hands there are a known number of cards of a particular suit (eg spades), and you want to know how many are in one hand and how many are in the other. What is the probability of the split? This problem comes up in the game of <a href="https://en.wikipedia.org/wiki/Contract_bridge">bridge</a> but you could imagine similar logic extending to other card games.
</p>

<p>

$k$ cards left in each player's hand: <input onchange="redrawGraph()" type="number" class="form-control example-inline-input mb-3" id="k" min="0" max="26" value="13" step = "1">

<br/>

$n$ cards of particular suit outstanding: <input onchange="redrawGraph()" type="number" class="form-control example-inline-input mb-3" id="n" min="0" max="13" value="5" step = "1">
</p>
<p>A few notes: If there are $k$ cards in each of the 2 hands there are $2 k$ cards total. At the start of a game of bridge $k=13$. It must be the case that $n \leq 2  k$ because you can't have more cards of the suit left than number of cards! If there are $n$ of a suit, then there are $2k -n$ of other suits. This problem assumes that the cards are properly shuffled.

</p>

<b>Probability of different splits of the suit:</b>
<p>
	If we want to think about the probability of a given split, it is sufficient to chose one hand (call it hand1) and think about the probability of the number of the given suit in that hand. Though there are two hands, if I tell you how many of a suit are in one hand, you can automatically figure out how many of the suit are in the other hand: the number of the suit sums to $n$. 
	</p>

	<p>Let $Y$ be a random variable representing the number of the suit in hand1. We can calculate the probability that $Y$ equals different values $y$ by counting equally likely outcomes.
$$\p(Y = i) = \frac
	{ {n \choose i} \cdot {2\cdot k-n \choose k-i} }
	{ {2\cdot k \choose k}}$$
<canvas id="bridgeGraphEqual" style="max-height: 500px"></canvas>

<div style="height:20px"></div>

<b>Probability that either hand has at least $j$ cards of suit</b>
$$\p(X \geq j) = 1 - \sum_{i=n-j+1}^{j - 1}\p(Y= i)$$
<canvas id="bridgeGraphOver" style="max-height: 500px"></canvas>
</div>
</p>

<p>
	<div class="bordered">
<canvas id="bridgePoints" style="max-height: 500px"></canvas>
	</div>
</p>

<script>

let charts = {}

$(document).ready(function() {
	console.log(jStat.combination(8, 0))
	redrawGraph()
	drawPointsDistribution()
})



function redrawGraph() {
	let n = parseInt($("#n").val())
	let k = parseInt($("#k").val()) * 2

	let dataEqual = []
	for(let j = 0; j <= n; j++) {
		let prEqual = calcPrEqual(k, n, j)
		// console.log(k, n, j, prEqual)
		let x = `(${j}, ${n-j})`
		dataEqual.push([x, prEqual.toFixed(3)])
	}
	drawGraph(charts, 'bridgeGraphEqual', dataEqual, 'Split (i, n-i)', 'Pr(split)')

	let dataOver = []
	for(let j = 0; j <= n; j++) {
		let prOverJ = calcPrOverJ(k, n, j)
		dataOver.push([j, prOverJ.toFixed(3)])
	}
	drawGraph(charts, 'bridgeGraphOver', dataOver, 'Values of j', 'Pr(Y ≥ j)')
}

function calcPrOverJ(k, n, j) {
	let pr = 1;
	let gapMin = (n - j) + 1
	let gapMax = j - 1
	for (var i = gapMin; i <= gapMax; i++) {
		pr -= calcPrEqual(k, n, i)
	}

	return pr
}

function calcPrEqual(k, n, i) {


	let denom = jStat.combination(k,k/2)
	let t1 = jStat.combination(n, i)
	let t2 = 0
	if(k/2 - i <= k -n ) {
		t2 = jStat.combination(k - n, k/2-i)
	}
	console.log(t1, t2, denom)
	return t1 * t2 / denom
}

function drawPointsDistribution() {
	let pointsData = [
		[0,0.003629],
		[1,0.00786275],
		[2,0.01351425],
		[3,0.024557],
		[4,0.03853875],
		[5,0.05182025],
		[6,0.0658735],
		[7,0.080111],
		[8,0.08886475],
		[9,0.093599],
		[10,0.0940935],
		[11,0.0895525],
		[12,0.08019275],
		[13,0.068997],
		[14,0.05687775],
		[15,0.044275],
		[16,0.03302275],
		[17,0.0237395],
		[18,0.01612125],
		[19,0.01031075],
		[20,0.00642275],
		[21,0.0037975],
		[22,0.0020915],
		[23,0.0011035],
		[24,0.0005705],
		[25,0.0002675],
		[26,0.0001195],
		[27,0.00004425],
		[28,0.0000195],
		[29,0.00000775],
		[30,0.0000015],
		[31,0.00000075],
		[32,0.0000005],
		[33,0],
		[34,0],
		[35,0]
	]
	drawGraph(charts, 'bridgePoints', pointsData, 'x points in your hand', 'Pr(X=x)')
}
</script>

                        

<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-app.js"></script>

  <!-- If you enabled Analytics in your project, add the Firebase SDK for Analytics -->
  <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-analytics.js"></script>

  <!-- Add Firebase products that you want to use -->
  <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.1.2/firebase-firestore.js"></script>


<script type="text/javascript">
    // const firebase = require("firebase");
    // Required for side-effects
    // require("firebase/firestore");

    $(document).ready(function () {
        console.log('ready')
        const scrollTop = getScrollTop()
        console.log(scrollTop)
        $("#sidebar").scrollTop(scrollTop)
        $("#sidebar").scroll(function() {
          localStorage.scrollTop = $("#sidebar").scrollTop()
        })
        // $("#sidebar").mCustomScrollbar({
        //     theme: "minimal",
        //     mouseWheel: {preventDefault: true},
        //     advanced:{
        //      autoScrollOnFocus: false,
        //      updateOnContentResize: true
        //     },
        //     scrollInertia:0,
        //     contentTouchScroll:1,
        //     mouseWheel: {
        //         scrollAmount:1000
        //     },
        //     setTop:scrollTop + 'px',
        //     callbacks:{
        //         onScroll:function(){
        //             if(hasStorage) {

        //                 localStorage.scrollTop = this.mcs.top;
        //                 console.log(localStorage.scrollTop)
        //             }
        //         }
        //     } 
        // });

        $('#sidebarCollapse').on('click', function () {
            $('#sidebar, #content').toggleClass('active');
            $('.collapse.in').toggleClass('in');
            $('a[aria-expanded=true]').attr('aria-expanded', 'false');
        });

        
        let lastPart = getUrlKey()

        // $(".scroller-back").mCustomScrollbar("scrollTo", $("#" +scrollKey), {
        //     scrollInertia:0
        // });

        // addExampleToFirebase()
    });

    function getScrollTop() {
        console.log('here')
        if(typeof(Storage) !== "undefined") {
            return Number(localStorage.scrollTop)
        }
        return 0;
    }

    function getUrlKey() {
        var pathname = window.location.pathname;
        
        let parts = pathname.split('/')
        var currIndex = parts.length - 1
        while(currIndex >= 0) {
            let nextPart = parts[currIndex]
            if(nextPart) {
                return nextPart
            }
            currIndex -= 1
        }
        return ''
    }

    function submitQuestion() {
        firebase.initializeApp({
          apiKey: "AIzaSyBqZVV7Qrp0DT3aBCCTCTMUCrPJO0pb3tY",
          authDomain: "probability-digital-world.firebaseapp.com",
          projectId: "probability-digital-world"
        });

        var db = firebase.firestore();

        db.collection("questions").add({
            email: $("#question-email").val(),
            question: "Lovelace",
            page: getUrlKey()
        })
        .then(function(docRef) {
            console.log("Document written with ID: ", docRef.id);
            alert('success')
        })
        .catch(function(error) {
            console.error("Error adding document: ", error);
        });
        // // // Generate a new push ID for the new post
        // var questionListRef = db.child("questions")
        // var newQuestionRef = questionListRef.push();
        // newQuestionRef.set({
        //     'title':'test'
        // });
        
    }

    function onCuriosity() {
        Swal.fire({
          title: 'Curious?',
          position: 'bottom-end',
          allowOutsideClick:false,
          backdrop:false,
          confirmButtonText: 'Submit',
          input: 'textarea',
          html:
            '<p>We are trying to make this book better. Let us know if you find something confusing. If you ask a question we will try to answer it. If you find a mistake we will fix it. </p>' +
            '<input placeholder="Your email (optional)..." id="question-email" class="swal2-input">',
          inputPlaceholder: 'Type your question or message here...',
          inputAttributes: {
            'aria-label': 'Type your question or message here'
          },
          showCancelButton: true,
          preConfirm: () => submitQuestion()
        })
    }
</script>

<script src="sweetalert2.all.min.js"></script>
<!-- Optional: include a polyfill for ES6 Promises for IE11 -->
<script src="https://cdn.jsdelivr.net/npm/promise-polyfill"></script>                
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>




</html>